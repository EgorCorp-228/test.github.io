<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="inline">
        <h2>Онлайн заявка</h2>
        <form id="contact" action="#" method="post" name="contact">
        <input id="name" class="txt" name="name" type="name" placeholder="Ваше имя">
        <input id="phone" class="txt" name="phone" type="phone" placeholder="Ваш телефон"> 
        <input id="email" class="txt" name="email" type="email" placeholder="Ваш e-mail"> 
        <textarea id="msg" class="txtarea" name="msg" placeholder="Ваше сообщение:"></textarea><button id="send">Отправить</button></form></div>
</body>
  <script>function validateEmail(email) { var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return reg.test(email);jQuery(document).ready(function() {jQuery(".modalbox").fancybox();jQuery("#contact").submit(function() {return false;});jQuery("#send").on("click", function() {var emailval = jQuery("#email").val();var namevl = jQuery("#name").val();var phonevl = jQuery("#phone").val();var msgval = jQuery("#msg").val();var msglen = msgval.length;var mailvalid = validateEmail(emailval);if(mailvalid == false) { jQuery("#email").addClass("error"); }else if(mailvalid == true) { jQuery("#email").removeClass("error"); }if(mailvalid == false) { jQuery("#name").addClass("error"); }else if(mailvalid == true){ jQuery("#name").removeClass("error"); }if(mailvalid == false) { jQuery("#phone").addClass("error"); }else if(mailvalid == true){ jQuery("#phone").removeClass("error"); }if(msglen < 4) { jQuery("#msg").addClass("error"); }else if(msglen >= 4){ jQuery("#msg").removeClass("error"); }if(mailvalid == true && msglen >= 4) {// если обе проверки пройдены// сначала мы скрываем кнопку отправки$("#send").replaceWith("<em>отправка...</em>"); jQuery.ajax({ type: 'POST', url: 'sendmessage.php', data: jQuery("#contact").serialize(), success: function(data) { if(data == "true") { jQuery("#contact").fadeOut("fast", function(){ jQuery(this).before("<p><strong>Ваше сообщение отправлено</strong></p>"); setTimeout("jQuery.fancybox.close()", 1000); }); } } }); } });});</script>
</html>
